language: python

python:
- "2.7"
- "3.4"
- "3.5"
- "3.5-dev"  # 3.5 development branch
- "3.6"
- "3.6-dev"  # 3.6 development branch
- "3.7-dev"  # 3.7 development branch

install:
- pip install -r requirements-dev.txt
- pip install tox-travis
- pip install .

script:
- tox

before_deploy:
- "echo 'Deploying to PYPI'"

deploy:
  provider: pypi
  user: ${PYPI_USERNAME}
  password: ${PYPI_PASSWORD}
  on:
    branch: master

after_deploy:
- "echo 'Successfully deployed to PYPI'"